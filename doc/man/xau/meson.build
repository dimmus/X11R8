# SPDX-License-Identifier: MIT
# Copyright Â© 2023 Intel Corporation

prog_sed = find_program('sed')

foreach man: [
  'Xau', 'XauDisposeAuth', 'XauFileName', 'XauGetAuthByAddr', 'XauGetBestAuthByAddr',
  'XauLockAuth', 'XauReadAuth', 'XauUnlockAuth', 'XauWriteAuth'
  ]
  custom_target(
    '@0@'.format(man),
    input: '@0@'.format(man),
    output: '@0@'.format(3),
    command: [
      prog_sed,
      '-e', 's/__xorgversion__/"libXau @0@" "X Version 11"/'.format(ver_xau),
      '-e', 's/__libmansuffix__/3/',
      '@INPUT@',
    ],
    capture: true,
    install: true,
    install_dir: dir_man / 'man3',
  )
endforeach
